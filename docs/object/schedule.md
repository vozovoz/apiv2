# <a name="up"/>Vozovoz API 2.0

[Главная страница](/README.md) > [Объекты](index.md) > Даты доставки


> **Код объекта: `schedule`**

## Содержание

* [Описание](#description)
* [Получение данных. Действие `get`](#get)
    * [Общий пример структуры](#get-example)
    * [Подробное описание структуры](#get-struct)
    * [Данные ответа](#get-response)
        * [Пример ответа "адрес-адрес"](#get-response-example-addr-addr)
        * [Пример ответа "терминал-терминал"](#get-response-example-term-term)


## <a name="description"/>Описание

Представляет собой объект, использующийся для получения данных по имеющимся датам доставки.

> В данной документации для упрощения понимания **_структурами_** называются все данные, которые содержат какие-либо данные
> (как другие структуры, так и простые типы данных: строка, число, логический тип).
> Под ["параметрами"](../params/index.md) мы понимаем необходимый **полный** массив данных, что передаётся нашему серверу
> для получения определённого ответа. Приведённые структуры указываются внутри [POST-параметра](../params/post.md) `params`.


## <a name="get"/>Получение данных. Действие `get`


### <a name="get-get"/>Данные запроса

> Узел `date` в объекте `dispatch` является необязательным параметром, однако может в несколько раз сократить время обработки запроса.
> Учтите также, что передача в запросе уникальных ID локации\терминала также ускоряет время ответа.

#### <a name="get-example"/>Общий пример структуры

```javascript
// полное оформление кода на javascript для использования в консоли см. в разделе "Быстрый старт"
xhttp.send(JSON.stringify(
{
  "object": "schedule",
     "action": "get",
     "params": {

       // адрес отправки (в свободной форме) или уникальный ID локации
       "dispatch": {"address": "Санкт-Петербург"},
       // или уникальный ID терминала отправки
       // "dispatch": {"terminal": "12345678-1234-1234-1234-1234567890ab"},

       // адрес доставки (в свободной форме) или уникальный ID локации
       "destination": {"address" : "мск, ленинский"}
       // или терминал доставки (да, терминал тоже может быть указан простым текстом)
       // "destination": {"terminal": "мск, МКАД 84-ый км"}

     }
}))
```

#### <a name="get-struct"/>Корневая структура. Передаётся напрямую в узел `params`

| Структура     | Тип       | Описание |
| ---------     | ---       | -------- |
| `destination` | object    | Объект, содержащий данные доставки |
| - `address`   | string    | Строка адреса получения в свободной форме или уникальный ID локации |
| - `terminal`  | string    | Строка терминала получения в свободной форме или уникальный ID терминала |
| `dispatch`    | object    | Объект, содержащий данные отправления |
| - `address`   | string    | Строка адреса отправления в свободной форме или уникальный ID локации |
| - `date`      | string    | Дата отправления в формате `YYYY-MM-DD` (например, `2020-03-01` - 1 марта 2020 года). Необязательный параметр |
| - `terminal`  | string    | Строка терминала отправления в свободной форме или уникальный ID терминала |

>Вы можете использовать:
>* узел `dispatch`.`date` для получения расписания по выбранной дате;
>* не указывать параметр `dispatch`.`date` для получения актуального расписания на ближайшие 15 дней.


### <a name="get-response"/>Данные ответа

* [Пример ответа "адрес-адрес"](#get-response-example-addr-addr)
* [Пример ответа "терминал-терминал"](#get-response-example-term-term)

> ВНИМАНИЕ! Использовать можно все комбинации (не только приведенные в примере):
> - адрес-адрес
> - адрес-терминал
> - терминал-адрес
> - терминал-терминал

<a name="get-response-example-addr-addr"/>Пример ответа "адрес-адрес":

```json
{
  "response": {
    "2019-11-28": { // дата отправки
      // стандартный интервал забора груза для данной локации (в часах)
      "hourInterval": 5, // т.е. без режима "Фиксированное время"
      "period": { // доступный период забора груза для данной локации
        "start": "07:00",
        "end": "23:30"
      },
      // доступные даты доставки для данной даты отправки (в данном случае "2019-11-28")
      "destination": {
        "18:00": { // если груз был забран до "18:00"
          "2019-12-04": {
            "hourInterval": 8, // стандартный интервал доставки груза для данной локации (в часах)
            "period": { // доступный период отвоза груза для данной локации
              "start": "10:00",
              "end": "18:00"
            }
          },
          "2019-12-06": {
            "hourInterval": 8,
            "period": {
              "start": "10:00",
              "end": "18:00"
            }
          }
        },
        "23:30": { // если груз был забран до "23:30"
          "2019-12-06": {
            "hourInterval": 8,
            "period": {
              "start": "10:00",
              "end": "18:00"
            }
          },
          "2019-12-11": {
            "hourInterval": 8,
            "period": {
              "start": "10:00",
              "end": "18:00"
            }
          }
        }
      }
    },
    "2019-11-29": { // дата отправки
      //... данные на след. дату в таком же формате как и выше
    }
  }
}
```

<a name="get-response-example-term-term"/>Пример ответа "терминал-терминал":

```json
{
  "response": {
    "2019-11-28": { // дата отправки
      // доступные даты доставки для данной даты отправки (в данном случае "2019-11-28")
      "destination": {
        "18:00": { // если груз был доставлен на терминал 28.11.2019 до "18:00"
          "2019-11-29": "14:00", // груз будет доступен 29.11.2019 после "14:00"
          "2019-11-30": "anytime", // в любое время
          "2019-12-01": "anytime", // в любое время
          "2019-12-02": "anytime"  // в любое время
        },
        "22:00": { // если груз был доставлен на терминал до "22:00"
          "2019-11-30": "16:00", // груз будет доступен 30.11.2019 после "16:00"
          "2019-12-01": "anytime", // в любое время
          "2019-12-02": "anytime", // в любое время
          "2019-12-03": "anytime"  // в любое время
        }
      }
    },
    "2019-11-29": { // дата отправки
      // ... данные на след. дату в таком же формате как и выше
    }
  }
}
```

***
[▲ Наверх](#up)